<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="./theme/css/style.css">
	<!--<link rel="stylesheet/less" type="text/css" href="/theme/css/style.less">-->
	<!--<script src="/theme/js/less.js" type="text/javascript"></script>-->
	<link rel="stylesheet" type="text/css" href="./theme/css/pygments.css">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>
	<link rel="icon" type="image/png" href="favicon.png" />

	<link href="http://memcpy.io/" type="application/atom+xml" rel="alternate" title="memcpy.io ATOM Feed" />

            <meta property="og:title" content="ESP8266 APA102 Bulb" />
            <meta property="og:type" content="article" />
            <meta property="og:image" content="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_running.jpg" />
            <meta property="og:url" content="http://memcpy.io/esp8266-apa102-bulb.html" />
            <meta property="og:description" content="The product of this project is a WiFi connected LED bulb. Every LED on this bulb is individually programmable over the WiFi, by simply sending UDP packets to the bulb. Software and hardware sources git clone https://github.com/robertfoss/esp8266_apa102_bulb.git This project consists of 3 parts: the software ..." />
            <meta property="og:locale" content="" />
            <meta property="og:site_name" content="memcpy.io" />
            <meta property="article:published_time" content="2016-02-07" />
            <meta property="article:section" content="ESP8266" />
            <meta property="article:tag" content="ESP8266" />
            <meta property="article:tag" content="APA102" />
            <meta property="article:tag" content="LED" />
            <meta property="article:tag" content="WIFI" />

		<title>memcpy.io</title>
		<meta charset="utf-8" />
</head>
<body>
	<section id="sidebar">
		<div id="menu">
			<a href="/">
				<img type="image/png" src="./logo.png" width="155">
			</a>

			<h2>Projects, hacks and engineering</h2>
			<ul>
					<li><a href="about-me.html">About me</a></li>
					<li><a href="contracting.html">Contracting</a></li>
					<li><a href="https://github.com/robertfoss">GitHub</a></li>
					<li><a href="archives.html">Previous posts</a></li>
			</ul>
		</div>
	</section>

	<section id="posts">
	<article class="single">
		<h1 id="title">
			<a href="./esp8266-apa102-bulb.html" rel="bookmark"
				title="Permalink to ESP8266 APA102 Bulb">ESP8266 APA102 Bulb</a>
		</h1>
		<abbr class="published" title="2016-02-07T22:46:00+01:00">Sun 07 February 2016</abbr>
		<p><img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_running.jpg" title="v2: Assembled and running over WiFi" /></p>
<p>The product of this project is a WiFi connected LED bulb. Every LED on this bulb is individually programmable over the WiFi, by simply sending UDP packets to the bulb.</p>
<h2>Software and hardware sources</h2>
<div class="highlight"><pre>git clone https://github.com/robertfoss/esp8266_apa102_bulb.git
</pre></div>


<p><a href="https://github.com/robertfoss/esp8266_apa102_bulb">This project</a> consists of 3 parts: the software running on the led bulb, the software running on some host computer and the hardware.</p>
<h3>Firmware</h3>
<p>The firmare is based on the <a href="https://github.com/nodemcu/nodemcu-firmware">NodeMCU</a> firwmare for the ESP8266. It's running the APA102 LED driver and the enduser setup module, which I've written about <a href="../user-friendly-setup-of-esp8266-gadgets.html">previously</a>.</p>
<p>Additionally it's running 3 lua scripts that deal with different aspects.</p>
<p>There's init.lua which makes sure we're connected to a WiFi.</p>
<p>udp_listener.lua receives UDP packets and then sends forwards that data to the APA102 strips.</p>
<p>And lastly udb_broadcast.lua which periodically broadcasts a heartbeat for this LED bulb to signal that it is alive and well.</p>
<h3>Host application</h3>
<p>The current (as of the publish date of this post) incarnation of the host application listens for bulbs that are alive on the hosts network. If a bulb is found is will be added to the list of bulbs to be animated. All animations are simple and sinusoidal and only use the time a bulb has been 'alive' as an input for the animation.</p>
<h3>Hardware</h3>
<p>The hardware is based around the ESP8266 WiFi IC and the APA102 SPI LED IC.</p>
<p>The flavor of ESP8266 used in this project is the ESP12-F module, since it the latest module available with the integrated antenna form factor.</p>
<p>APA102 was chosen instead of the much more common WS2812B chip, since it uses a SPI like protocol which isn't timing sensitive and also does not require external capacitors at next to each LED.</p>
<h4>v3.1 Schematic</h4>
<p><img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v3.1_schematic.png" title="v3.1: Schematic" /></p>
<h4>v2 3D Model</h4>
<p><img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_3d_model.png" title="v2: 3D model" /></p>
<h4>Assembled v2 hardware</h4>
<p><img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_95pct_assembled.jpg" title="v2: 95% assembled" />
<img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_running.jpg" title="v2: Assembled and running over WiFi" />
<img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_hanging.jpg" title="v2: Hanging and running over WiFi" /></p>

		<div id="article_meta">
				Category:
					<a href="./category/esp8266.html">ESP8266</a>
				<br />Tags:
					<a href="./tag/esp8266.html">ESP8266</a>
					<a href="./tag/apa102.html">APA102</a>
					<a href="./tag/led.html">LED</a>
					<a href="./tag/wifi.html">WIFI</a>
		</div>
	</article>

	<footer>
		<a href="./" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;Back to blog</a>
	</footer>


	</section>

</body>
</html>