<!DOCTYPE html>
<html>
	<head>
		<title>memcpy.io | ESP8266 APA102 Bulb</title>
		<link rel="icon" type="image/png" href="/logo.png" />
		<link rel="stylesheet" type="text/css" href="/theme/css/fonts.css">
		<link rel="stylesheet" type="text/css" href="/theme/css/math.css">
        <link href="https://fonts.googleapis.com/css?family=Maven+Pro" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="/theme/css/page.css">
		<link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="memcpy.io atom feed" />
		<link href="/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="memcpy.io RSS feed" />
		<meta charset="utf-8">
		<meta name="robots" content="index,follow">
		<meta name="viewport" content="width=device-width, initial-scale=1"> <!-- TODO: is this still required in 2015? -->
		<meta name="description" content="The product of this project is a WiFi connected LED bulb. Every LED on this bulb is individually programmable over the WiFi, by simply sending UDP packets to the bulb. Software and hardware sources git clone https://github.com/robertfoss/esp8266_apa102_bulb.git This project consists of 3 parts: the software running on the led bulb, the software running on some host computer and the hardware. Firmware The firmare is based on the NodeMCU firwmare for the ESP8266. It&#39;s running the APA102 LED driver and the enduser setup module, which I&#39;ve written about previously. Additionally it&#39;s running 3 lua scripts that deal with different aspects. There&#39;s init.lua which makes sure we&#39;re connected to a WiFi. udp_listener.lua receives UDP packets and then sends forwards that â€¦">
		<meta name="author" content="Robert Foss">
		<meta name="keywords" content="Robert Foss, Open Source, Software, Linux, Embedded, Engineer, ESP8266, APA102, LED, WIFI">
		<meta property="og:title" content="ESP8266 APA102 Bulb" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_running.jpg" />
		<meta property="og:url" content="https://memcpy.io/esp8266-apa102-bulb.html" />
		<meta property="og:locale" content="" />
		<meta property="og:site_name" content="memcpy.io" />
		<meta property="article:published_time" content="2016-02-07" />
		<meta property="article:section" content="ESP8266" />
		<meta property="article:tag" content="ESP8266" />
		<meta property="article:tag" content="APA102" />
		<meta property="article:tag" content="LED" />
		<meta property="article:tag" content="WIFI" />
	</head>
	<body>
		<article id="content" itemscope>
			<header>
				<h1>ESP8266 APA102 Bulb</h1>
				<p>
				Published <time datetime="2016-02-07" itemprop="datePublished">2016-02-07</time>
				</p>
			</header>
			<p>As an experiment in HW design an alternative to the Philips Hue was built. It's fully programmable over WiFi.</p>
			<p><img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_running.jpg" title="v2: Assembled and running over WiFi"></p>
<p>The product of this project is a WiFi connected LED bulb. Every LED on this bulb is individually programmable over the WiFi, by simply sending UDP packets to the bulb.</p>
<h2>Software and hardware sources</h2>
<div class="highlight"><pre><span></span>git clone https://github.com/robertfoss/esp8266_apa102_bulb.git
</pre></div>


<p><a href="https://github.com/robertfoss/esp8266_apa102_bulb">This project</a> consists of 3 parts: the software running on the led bulb, the software running on some host computer and the hardware.</p>
<h3>Firmware</h3>
<p>The firmare is based on the <a href="https://github.com/nodemcu/nodemcu-firmware">NodeMCU</a> firwmare for the ESP8266. It's running the APA102 LED driver and the enduser setup module, which I've written about <a href="../user-friendly-setup-of-esp8266-gadgets.html">previously</a>.</p>
<p>Additionally it's running 3 lua scripts that deal with different aspects.</p>
<p>There's init.lua which makes sure we're connected to a WiFi.</p>
<p>udp_listener.lua receives UDP packets and then sends forwards that data to the APA102 strips.</p>
<p>And lastly udb_broadcast.lua which periodically broadcasts a heartbeat for this LED bulb to signal that it is alive and well.</p>
<h3>Host application</h3>
<p>The current (as of the publish date of this post) incarnation of the host application listens for bulbs that are alive on the hosts network. If a bulb is found is will be added to the list of bulbs to be animated. All animations are simple and sinusoidal and only use the time a bulb has been 'alive' as an input for the animation.</p>
<h3>Hardware</h3>
<p>The hardware is based around the ESP8266 WiFi IC and the APA102 SPI LED IC.</p>
<p>The flavor of ESP8266 used in this project is the ESP12-F module, since it the latest module available with the integrated antenna form factor.</p>
<p>APA102 was chosen instead of the much more common WS2812B chip, since it uses a SPI like protocol which isn't timing sensitive and also does not require external capacitors at next to each LED.</p>
<h4>v3.1 Schematic</h4>
<p><img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v3.1_schematic.png" title="v3.1: Schematic"></p>
<h4>v2 3D Model</h4>
<p><img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_3d_model.png" title="v2: 3D model"></p>
<h4>Assembled v2 hardware</h4>
<p><img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_95pct_assembled.jpg" title="v2: 95% assembled">
<img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_running.jpg" title="v2: Assembled and running over WiFi">
<img alt="Alt text" src="https://github.com/robertfoss/esp8266_apa102_bulb/raw/media/v2_hanging.jpg" title="v2: Hanging and running over WiFi"></p>
		</article>
		<section id="teaser-section">
			<div id="teaser">
				<p>Tags:
					<a href="./tag/esp8266.html">ESP8266 </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/apa102.html">APA102 </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/led.html">LED </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/wifi.html">WIFI </a>
				</p>
			</div>
		</section>
		<footer>
			<div id="footer">
				<p id="notices" class="smcp">
					<a href="/about.html">About</a>
					<span id="breakdot">&middot;</span>
					<a href="/index.html">Blog</a>
					<span id="breakdot">&middot;</span>
					<a href="/talks.html">Talks</a>
					<span id="breakdot">&middot;</span>
					<a href="/contact.html">Contact</a>
					<span id="breakdot">&middot;</span>
					<a href="https://github.com/robertfoss">GitHub</a>
					<br>
					<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Copyleft</a>
					<span id="breakdot">&middot;</span>
					2018 Robert Foss
					<span id="breakdot">&middot;</span>
					<a href="https://github.com/robertfoss/memcpy.io">Source</a>
					<br>
					<a href="/"><img src="/logo.png"></a>
				</p>
			</div>
		</footer>
	</body>
</html>