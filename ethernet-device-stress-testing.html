<!DOCTYPE html>
<html>
	<head>
		<title>memcpy.io | Ethernet device stress testing</title>
		<link rel="icon" type="image/png" href="/logo.png" />
		<link rel="stylesheet" type="text/css" href="/theme/css/fonts.css">
		<link rel="stylesheet" type="text/css" href="/theme/css/math.css">
        <link href="https://fonts.googleapis.com/css?family=Maven+Pro" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="/theme/css/page.css">
		<link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="memcpy.io atom feed" />
		<link href="/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="memcpy.io RSS feed" />
		<meta charset="utf-8">
		<meta name="robots" content="index,follow">
		<meta name="viewport" content="width=device-width, initial-scale=1"> <!-- TODO: is this still required in 2015? -->
		<meta name="description" content="During testing of power management patches for usb ethernet dongles, a script was needed to stress test connecting/disconnecting/reconnecting these devices. Luckily a script like that already exists as a part of the chromiumos project, and can be found here. That script does however not run standalone and requires a remote device (chromebook) to execute on. So I took the liberty of changing it to support local testing. The modified version can be found here. This might come in handy for someone, if not, the script will at least be archived on this site. Example $ sudo pip2.7 install autotest $ ip link 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1 link/loopback 00:00:00 â€¦">
		<meta name="author" content="Robert Foss">
		<meta name="keywords" content="Robert Foss memcpy Robert Foss, Open Source, Software, Linux, Embedded, Engineer, linux, kernel, script, collabora, chromiumos">
		<meta property="og:title" content="Ethernet device stress testing" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://memcpy.io/images/2016-08-25_ethernet_device_testing.png" />
		<meta property="og:url" content="https://memcpy.io/ethernet-device-stress-testing.html" />
		<meta property="og:locale" content="" />
		<meta property="og:site_name" content="memcpy.io" />
		<meta property="article:published_time" content="2016-08-25" />
		<meta property="article:section" content="kernel" />
		<meta property="article:tag" content="linux" />
		<meta property="article:tag" content="kernel" />
		<meta property="article:tag" content="script" />
		<meta property="article:tag" content="collabora" />
		<meta property="article:tag" content="chromiumos" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:creator" content="@memcpy_io" />
		<meta name="twitter:site" content="@memcpy_io" />
		<meta name="twitter:title" content="Ethernet device stress testing" />
		<meta name="twitter:description" content="During kernel upstreaming for chromiumos devices a standalone ethernet subssystem testing script was needed." />
		<meta name="twitter:image" content="https://memcpy.io/images/2016-08-25_ethernet_device_testing.png" />
	</head>
	<body>
		<article id="content" itemscope>
			<header>
				<h1>Ethernet device stress testing</h1>
				<p>
				Published <time datetime="2016-08-25" itemprop="datePublished">2016-08-25</time>
				</p>
			</header>
			<p>During kernel upstreaming for chromiumos devices a standalone ethernet subssystem testing script was needed.</p>
			<p><img alt="Alt text" src="/images/2016-08-25_ethernet_device_testing.png" title="Screenshot of python script"></p>
<p>During testing of power management patches for usb ethernet dongles, a script
was needed to stress test connecting/disconnecting/reconnecting these devices.</p>
<p>Luckily a script like that already exists as a part of the chromiumos project,
and can be found <a href="https://chromium.googlesource.com/chromiumos/third_party/autotest/+/HEAD/client/site_tests/network_EthernetStressPlug/network_EthernetStressPlug.py">here</a>.</p>
<p>That script does however not run standalone and requires a remote device
(chromebook) to execute on. So I took the liberty of changing it to support
local testing. The modified version can be found <a href="files/2016-08-25/network_EthernetStressPlug.py">here</a>.</p>
<p>This might come in handy for someone, if not, the script will at least be
archived on this site.</p>
<h2>Example</h2>
<div class="highlight"><pre><span></span>$ sudo pip2.7 install autotest
$ ip link
<span class="m">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="m">65536</span> qdisc noqueue state UNKNOWN mode DEFAULT group default qlen <span class="m">1</span>
    link/loopback <span class="m">00</span>:00:00:00:00:00 brd <span class="m">00</span>:00:00:00:00:00
<span class="m">2</span>: wlp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="m">1500</span> qdisc pfifo_fast state UP mode DORMANT group default qlen <span class="m">1000</span>
    link/ether <span class="m">48</span>:e2:44:f6:e8:5b brd ff:ff:ff:ff:ff:ff
<span class="m">27</span>: enx000ec689ab9e: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu <span class="m">1500</span> qdisc pfifo_fast state DOWN mode DEFAULT group default qlen <span class="m">1000</span>
    link/ether <span class="m">00</span>:0e:c6:89:ab:9e brd ff:ff:ff:ff:ff:ff
$ <span class="nb">export</span> <span class="nv">INTERFACE</span><span class="o">=</span>enx000ec689ab9e
$ <span class="nb">export</span> <span class="nv">NUM_ITERATIONS</span><span class="o">=</span><span class="m">10</span>
$ sudo python network_EthernetStressPlug.py <span class="nv">$INTERFACE</span> <span class="nv">$NUM_ITERATIONS</span>
</pre></div>
		</article>
		<section id="teaser-section">
			<div id="teaser">
				<p>Tags:
					<a href="./tag/linux.html">linux </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/kernel.html">kernel </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/script.html">script </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/collabora.html">collabora </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/chromiumos.html">chromiumos </a>
				</p>
			</div>
		</section>
		<footer>
			<div id="footer">
				<p id="notices" class="smcp">
					<a href="/about.html">About</a>
					<span id="breakdot">&middot;</span>
					<a href="/index.html">Blog</a>
					<span id="breakdot">&middot;</span>
					<a href="/talks.html">Talks</a>
					<span id="breakdot">&middot;</span>
					<a href="/contact.html">Contact</a>
					<span id="breakdot">&middot;</span>
					<a href="https://github.com/robertfoss">GitHub</a>
					<br>
					<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Copyleft</a>
					<span id="breakdot">&middot;</span>
					2018 Robert Foss
					<span id="breakdot">&middot;</span>
					<a href="https://github.com/robertfoss/memcpy.io">Source</a>
					<br>
					<a href="/"><img src="/logo.png"></a>
				</p>
			</div>
		</footer>
	</body>
</html>