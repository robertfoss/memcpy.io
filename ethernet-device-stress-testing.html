<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="./theme/css/style.css">
	<!--<link rel="stylesheet/less" type="text/css" href="/theme/css/style.less">-->
	<!--<script src="/theme/js/less.js" type="text/javascript"></script>-->
	<link rel="stylesheet" type="text/css" href="./theme/css/pygments.css">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>
	<link rel="icon" type="image/png" href="logo.png" />

	<link href="http://memcpy.io/" type="application/atom+xml" rel="alternate" title="memcpy.io ATOM Feed" />

    <meta name="robots" content="index,follow">
    <meta name="keywords" content="Robert Foss, Open Source, Linux, Embedded, Engineer, linux, kernel, script, collabora, chromiumos">
    <meta name="description" content="During testing of power management patches for usb ethernet dongles, a script was needed to stress test connecting/disconnecting/reconnecting these devices. Luckily a script like that already exists as a part of the chromiumos project, and can be found here. That script does however not run standalone and requires a remote device (chromebook) to execute on. So I took the liberty of changing it to support local testing. The modified version can be found here. This might come in handy for someone, if not, the script will at least be archived on this site. Example $ sudo pip2.7 install autotest $ ip link 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1 link/loopback 00:00:00 ..." />

    <meta property="og:title" content="Ethernet device stress testing" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="http://memcpy.io/images/2016-08-25_ethernet_device_testing.png" />
    <meta property="og:url" content="http://memcpy.io/ethernet-device-stress-testing.html" />
    <meta property="og:description" content="During testing of power management patches for usb ethernet dongles, a script was needed to stress test connecting/disconnecting/reconnecting these devices. Luckily a script like that already exists as a part of the chromiumos project, and can be found here. That script does however not run standalone and requires a remote device (chromebook) to execute on. So I took the liberty of changing it to support local testing. The modified version can be found here. This might come in handy for someone, if not, the script will at least be archived on this site. Example $ sudo pip2.7 install autotest $ ip link 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1 link/loopback 00:00:00 ..." />
    <meta property="og:locale" content="" />
    <meta property="og:site_name" content="memcpy.io" />
    <meta property="article:published_time" content="2016-08-25" />
    <meta property="article:section" content="kernel" />
    <meta property="article:tag" content="linux" />
    <meta property="article:tag" content="kernel" />
    <meta property="article:tag" content="script" />
    <meta property="article:tag" content="collabora" />
    <meta property="article:tag" content="chromiumos" />

	<title>memcpy.io | Ethernet device stress testing</title>
	<meta charset="utf-8" />
</head>
<body>
	<section id="sidebar">
		<div id="menu">
			<a href="/">
				<img type="image/png" src="./logo.png" width="155">
			</a>

			<h1>memcpy.io</h1>
			<h2>Projects, hacks and engineering</h2>
			<ul>
					<li><a href="about-me.html">About</a></li>
					<li><a href="contracting.html">Contracting</a></li>
					<li><a href="https://github.com/robertfoss">GitHub</a></li>
					<li><a href="archives.html">Previous posts</a></li>
			</ul>
		</div>
	</section>

	<section id="posts">
	<article class="single">
		<h1 id="title">
			<a href="./ethernet-device-stress-testing.html" rel="bookmark"
				title="Permalink to Ethernet device stress testing">Ethernet device stress testing</a>
		</h1>
		<abbr class="published" title="2016-08-25T13:05:00+02:00">Thu 25 August 2016</abbr>
		<p><img alt="Alt text" src="images/2016-08-25_ethernet_device_testing.png" title="Screenshot of python script" /></p>
<p>During testing of power management patches for usb ethernet dongles, a script
was needed to stress test connecting/disconnecting/reconnecting these devices.</p>
<p>Luckily a script like that already exists as a part of the chromiumos project,
and can be found <a href="https://chromium.googlesource.com/chromiumos/third_party/autotest/+/HEAD/client/site_tests/network_EthernetStressPlug/network_EthernetStressPlug.py">here</a>.</p>
<p>That script does however not run standalone and requires a remote device
(chromebook) to execute on. So I took the liberty of changing it to support
local testing. The modified version can be found <a href="files/2016-08-25/network_EthernetStressPlug.py">here</a>.</p>
<p>This might come in handy for someone, if not, the script will at least be
archived on this site.</p>
<h2>Example</h2>
<div class="highlight"><pre>$ sudo pip2.7 install autotest
$ ip link
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="m">65536</span> qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: wlp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="m">1500</span> qdisc pfifo_fast state UP mode DORMANT group default qlen 1000
    link/ether 48:e2:44:f6:e8:5b brd ff:ff:ff:ff:ff:ff
27: enx000ec689ab9e: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu <span class="m">1500</span> qdisc pfifo_fast state DOWN mode DEFAULT group default qlen 1000
    link/ether 00:0e:c6:89:ab:9e brd ff:ff:ff:ff:ff:ff
$ <span class="nb">export</span> <span class="nv">INTERFACE</span><span class="o">=</span>enx000ec689ab9e
$ <span class="nb">export</span> <span class="nv">NUM_ITERATIONS</span><span class="o">=</span>10
$ sudo python network_EthernetStressPlug.py $INTERFACE $NUM_ITERATIONS
</pre></div>

		<div id="article_meta">
				Category:
					<a href="./category/kernel.html">kernel</a>
				<br />Tags:
					<a href="./tag/linux.html">linux</a>
					<a href="./tag/kernel.html">kernel</a>
					<a href="./tag/script.html">script</a>
					<a href="./tag/collabora.html">collabora</a>
					<a href="./tag/chromiumos.html">chromiumos</a>
		</div>
	</article>

	<footer>
		<a href="./" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;Back to blog</a>
	</footer>


	</section>

</body>
</html>