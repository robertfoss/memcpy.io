<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>memcpy.io - history</title><link>https://memcpy.io/</link><description></description><lastBuildDate>Tue, 13 Feb 2018 20:20:00 +0100</lastBuildDate><item><title>Fixing .zsh_history corruption</title><link>https://memcpy.io/fixing-zsh_history-corruption.html</link><description>&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;zsh&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;corrupt&lt;/span&gt; &lt;span class="n"&gt;history&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="sr"&gt;/home/$USER/&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;zsh_history&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Most zsh user will have seen the above line at one time or another.&lt;br&gt;
And it means that re-using your shell history is no longer possible.&lt;/p&gt;
&lt;p&gt;Maybe some of it can be recovered, but more than likely some has been lost.
And even if nothing important has been lost, you probably don't want to spend any time dealing with this.&lt;/p&gt;
&lt;h2&gt;Make zsh maintain a backup&lt;/h2&gt;
&lt;p&gt;Run this snippet in the terminal of your choice.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat &amp;lt;&amp;lt;EOT&amp;gt;&amp;gt; ~/.zshrc

# Backup and restore ZSH history
strings ~/.zsh_history | sed &amp;#39;:a;N;$!ba;s/\\\\\n//g&amp;#39; | sort | uniq -u &amp;gt; ~/.zsh_history.backup
cat ~/.zsh_history ~/.zsh_history.backup | sed &amp;#39;:a;N;$!ba;s/\\\\\n//g&amp;#39;| sort | uniq &amp;gt; ~/.zsh_history.backup

EOT
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;What does this actually do?&lt;/h3&gt;
&lt;p&gt;The â€¦&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Robert Foss</dc:creator><pubDate>Tue, 13 Feb 2018 20:20:00 +0100</pubDate><guid isPermaLink="false">tag:memcpy.io,2018-02-13:/fixing-zsh_history-corruption.html</guid><category>linux</category><category>shell</category><category>zsh</category><category>history</category><category>.zsh_history</category><category>corruption</category><category>fix</category><category>how</category><category>to</category><category>how-to</category></item></channel></rss>