<!DOCTYPE html>
<html>
	<head>
		<title>memcpy.io | Speed up `git log --graph` 18x times</title>
		<link rel="icon" type="image/png" href="/logo.png" />
		<link rel="stylesheet" type="text/css" href="/theme/css/fonts.css">
		<link rel="stylesheet" type="text/css" href="/theme/css/math.css">
		<link href="https://fonts.googleapis.com/css?family=Maven+Pro" rel="stylesheet">
		<link rel="canonical" href="./speed-up-git-log-graph-18x-times.html">
		<link rel="stylesheet" type="text/css" href="/theme/css/page.css">
		<meta charset="utf-8">
		<meta name="robots" content="index,follow">
		<meta name="viewport" content="width=device-width, initial-scale=1"> <!-- TODO: is this still required in 2015? -->
		<meta name="description" content="$ time git lg git lg 13.34s user 0.87s system 84% cpu 16.845 total # True by default as of git v2.24 git config --global core.commitGraph true git config --global gc.writeCommitGraph true # Command added in git v2.20 git commit-graph write $ time git lg git lg 0.72s user 0.14s system 74% cpu 1.154 total This is a speed up of ~18x, compared to the older versions. The way this works is that the commit-graph file stores the commit graph structure along with some extra metadata to speed up graph in the .git/objects/info directory.">
		<meta name="author" content="Robert Foss">
		<meta name="keywords" content="Robert Foss memcpy Robert Foss, Open Source, Software, Linux, Embedded, Engineer, git, lg, log, format, pretty, slow, speed up, commit, graph">
		<meta property="og:title" content="Speed up `git log --graph` 18x times" />
		<meta property="og:type" content="article" />
		<meta property="og:url" content="https://memcpy.io/speed-up-git-log-graph-18x-times.html" />
		<meta property="og:locale" content="" />
		<meta property="og:site_name" content="memcpy.io" />
		<meta property="article:published_time" content="2020-04-07" />
		<meta property="article:section" content="developer" />
		<meta property="article:tag" content="git" />
		<meta property="article:tag" content="lg" />
		<meta property="article:tag" content="log" />
		<meta property="article:tag" content="format" />
		<meta property="article:tag" content="pretty" />
		<meta property="article:tag" content="slow" />
		<meta property="article:tag" content="speed up" />
		<meta property="article:tag" content="commit" />
		<meta property="article:tag" content="graph" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:creator" content="@memcpy_io" />
		<meta name="twitter:site" content="@memcpy_io" />
		<meta name="twitter:title" content="Speed up `git log --graph` 18x times" />
		<meta name="twitter:description" content="For large repositories &#39;git log --graph&#39; can be slow, but for git v2.20+ it can be sped up." />
	</head>
	<body>
		<article id="content" itemscope>
			<header>
				<h1>Speed up `git log --graph` 18x times</h1>
				<p>
				Published <time datetime="2020-04-07" itemprop="datePublished">2020-04-07</time>
				</p>
			</header>
			<p>For large repositories 'git log --graph' can be slow, but for git v2.20+ it can be sped up.</p>
			<div class="highlight"><pre><span></span>$ <span class="nb">time</span> git lg
git lg  <span class="m">13</span>.34s user <span class="m">0</span>.87s system <span class="m">84</span>% cpu <span class="m">16</span>.845 total

<span class="c1"># True by default as of git v2.24</span>
git config --global core.commitGraph <span class="nb">true</span>
git config --global gc.writeCommitGraph <span class="nb">true</span>

<span class="c1"># Command added in git v2.20</span>
git commit-graph write

$ <span class="nb">time</span> git lg
git lg  <span class="m">0</span>.72s user <span class="m">0</span>.14s system <span class="m">74</span>% cpu <span class="m">1</span>.154 total
</pre></div>


<p>This is a speed up of ~18x, compared to the older versions.</p>
<p>The way this works is that the <a href="https://git-scm.com/docs/commit-graph">commit-graph</a>
file stores the commit graph structure along with some extra metadata to
speed up graph in the <code>.git/objects/info</code> directory.</p>
		</article>
		<section id="teaser-section">
			<div id="teaser">
				<p>Tags:
					<a href="./tag/git.html">git </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/lg.html">lg </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/log.html">log </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/format.html">format </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/pretty.html">pretty </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/slow.html">slow </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/speed-up.html">speed up </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/commit.html">commit </a>
					<span id="breakdot">&middot; </span>
					<a href="./tag/graph.html">graph </a>
				</p>
			</div>
		</section>
		<footer>
			<div id="footer">
				<p id="notices" class="smcp">
					<a href="/about.html">About</a>
					<span id="breakdot">&middot;</span>
					<a href="/index.html">Blog</a>
					<span id="breakdot">&middot;</span>
					<a href="/talks.html">Talks</a>
					<span id="breakdot">&middot;</span>
					<a href="/contact.html">Contact</a>
					<span id="breakdot">&middot;</span>
					<a href="https://github.com/robertfoss">GitHub</a>
					<br>
					<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Copyleft</a>
					<span id="breakdot">&middot;</span>
					2020 Robert Foss
					<span id="breakdot">&middot;</span>
					<a href="https://github.com/robertfoss/memcpy.io">Source</a>
					<br>
					<a href="/"><img src="/logo.png"></a>
				</p>
			</div>
		</footer>
	</body>
</html>